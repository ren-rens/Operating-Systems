В желанието си да разберем как светът работи, често се опитваме да изграждаме модели, които биха
могли да предскажат или симулират системи в хода на тяхното движение. Процесорите и програмите,
които те изпълняват, са включени в това изследователско пътешествие.


Вашото безкрайно желание да вникнете дълбоко в това как инструментите, с които всеки ден боравим, работят, ви амбицира да си измислите задача, която ви позволява по-добре да разберете сложния
материал от света на КАРХ.


Както би трябвало да знаем, всеки процесор работи с набор от регистри, които чете/пише по време
на изпълнението на инструкциите на процесът късметлия, който в този момент е бил избран от task
scheduler-а на ОС. Освен тях, процесорът има достъп и до RAM паметта, която действа като удължение
на пространството, с което процесът разполага.


В задачата си, вие решавате да си напишете симулатор на паралелно изпълняващи се процесори.
В този симулатор, всеки процесор разбира един и същ набор от инструкции, описана в таблицата
по-долу. Разликата между процесорите, обаче, е в броя на техните регистри и големината на RAM
паметта, с която те разполагат. Разбира се, програмите, които те ще изпълняват, също би трябвало
да бъдат съобразени с ограничението на конкретния процесор, върху който работят.


Като вход програмата ви получава един файл input.bin – описание на различните процесори. Файлът
се състои от наредени тройки елементи:
- ram_size – uint16_t, който описва големина на RAM памет за конкретния процесор. Ограничено до 512.
- register_count – uint16_t, който описва брой регистри за конкретния процесор. Ограничено до 32.
- filename – точно 8 байта, последният от които задължително е 0x00. Ако името е по-късо от 7 знака, излишните байтове са 0x00


За всяка наредена тройка, файлът, посочен от filename, е от следната структура:
- секция register values – register_count на брой байта, които задават началните състояния на регистрите за процесора.
- секция ram init – ram_size на брой байта, коите задават началното състояние на RAM паметта, с която процесорът ще работи.
• секция instructions – последна секция, която продължава до края на файла. Съдържа инструкциите(програмата), които съответният процесор ще изпълнява.


В процесорите, които симулираме, всеки регистър е с големина един байт, а всяка инструкция е
с големина точно 4 байта и разполага с 3 операнда. Байтовете във всяка инстуркция имат следното
значение:
- opcode – идентификатор на инструкцията.
- op1 – първи операнд на инструкцията.
- op2 – втори операнд на инструкцията.
- op3 – трети операнд на инструкцията.


За всяка наредена тройка от входния файл, вашата програма трябва да стартира нов процес, който да
действа като симулатор за конкретния процесор. Симулацията се изразява в следните стъпки:
- инициализиране на регистрите с байтовете от секция register values.
- инициализиране на RAM паметта с байтовете от секция ram init.
- изпълнение на инструцкиите от скеция instructions.


След приключване изпълнението на инструкциите, всеки от процесите-симулатори трябва да презапише секциите register values и ram init във файлът, с който работи, с новото състояние на регистрите
и RAM паметта.


> Забележка: Навсякъде, където се среща registers[opN], се има предвид регистъра с индекс opN. Навсякъде, където се среща RAM[N], се има предвид байтът с индекс N от RAM паметта.

> Забележка: Възможно е инструкция да не използва всеки операнд, въпреки че има общо 3 на разположение. PRINT и SLEEP са пример за това. В такъв случай, стойностите в допълнителните операнди не са от значние за инструкцията.


Пример: За инструкция (ADD 11 7 2), стойностите в регистър 7 и регистър 2 трябва да бъдат сумирани и записани в регистър 11. Тук op1 е със стойност 11, op2 е със стойност 7, a op3 е със стойност 2.


> Забележка: Решения, в които процесите не работят паралелно, ще получат по-малко точки.
